#include <stdio.h>

// Given function to be integrated
float func( float x)
{
	return (1 / ( 1 + x * x ));
}

// Function to perform calculations
float calculate(float a, float b, int n)
{
	float h = (b - a)/ n;
	
	printf("Value of h: %f\n", h);

	// Array for storing value of x and f(x)
	float x[n+1], y[n+1];

	// Calculating values of x and f(x)
        printf("x \t\t y\n");
	for (int i = 0; i < n+1; i++) {
		x[i] = a + i * h;
		y[i] = func(x[i]);
        printf("%f \t %f\n", x[i], y[i]);
	}

	// Calculating result
	printf("\n");
	float res = y[0] + y[n];
	for(int i = 1 ; i < n ; i++)
	{
		if (i % 3 == 0)
			res = res + 2 * y[i];
		else
			res = res + 3 * y[i];
		printf("%f\n", res);
	}
	return (3.0/8.0 * h) * res;
}

void main()
{
	int interval_limit;
	float lower_limit, upper_limit;

        printf("Enter the values of lower limit and upper limit: ");
        scanf("%f %f", &lower_limit, &upper_limit);

	printf("Enter the interval_limit: ");
        scanf("%d", &interval_limit);

        printf("Result is: %f", calculate(lower_limit, upper_limit, interval_limit));
}
